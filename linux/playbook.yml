---
- hosts: all
  gather_facts: yes
  sudo: yes

  pre_tasks:
    - get_url: url=https://deb.nodesource.com/setup dest=/root/add_node_repository.sh
    - command: /bin/bash /root/add_node_repository.sh
    - file: path=/root/add_node_repository.sh state=absent
    - apt: update_cache=yes
    - apt: upgrade=dist

  tasks:
    - apt: name={{ item }} state=present
      sudo: yes
      with_items:
        - bash-completion
        - nodejs
        - git
        - htop
        - alpine-pico
        - tree
        - watch
        - wget
        - curl
        - autojump
        - mtr
        - multitail

    - name: Remove packages
      apt: name={{ item }} state=absent purge=yes
      with_items:
        - update-notifier-common
        - landscape-common
        - update-manager-core
        - ubuntu-release-upgrader-core
        - update-motd

  post_tasks:
    - file: src=~/.dotfiles/linux/symlinks/{{ item }} dest=~/.{{ item }} state=link
      sudo: no
      with_items:
        - aliases
        - bashrc

    - file: src=~/.dotfiles/symlinks/{{ item }} dest=~/.{{ item }} state=link
      sudo: no
      with_items:
        - bash_prompt
        - functions
        - gitconfig
        - gitignore
        - jshintrc
        - nanorc
        - pylintrc
